# API请求捕获器 Chrome插件

一个用于捕获和分析网页按钮点击后触发的API请求的Chrome扩展程序。

## 功能特性

- 🎯 **智能监听**: 自动识别按钮点击并捕获相关API请求
- 📊 **请求分析**: 详细展示请求方法、URL、参数等信息
- 📋 **一键复制**: 支持复制请求参数，方便调试和测试
- 🔍 **实时监控**: 实时显示捕获的请求数量和状态
- 💾 **数据持久化**: 自动保存捕获的请求数据
- 🎨 **美观界面**: 现代化的用户界面设计

## 安装方法

### 开发者模式安装

1. 打开Chrome浏览器
2. 进入扩展程序页面 (`chrome://extensions/`)
3. 开启右上角的"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择本项目的文件夹
6. 插件安装完成

## 使用方法

### 基本操作

1. **开始监听**
   - 点击插件图标打开popup界面
   - 点击"开始监听"按钮
   - 状态指示器会变为绿色"正在监听"

2. **捕获请求**
   - 在网页上点击任何按钮
   - 插件会自动捕获5秒内触发的API请求
   - 请求会实时显示在列表中

3. **查看详情**
   - 点击列表中的任何请求项
   - 查看详细的请求信息和参数
   - 点击"复制参数"按钮复制请求数据

4. **停止监听**
   - 点击"停止监听"按钮结束监听
   - 状态指示器会变为红色"未监听"

### 高级功能

- **清空记录**: 点击"清空记录"按钮删除所有捕获的请求
- **刷新列表**: 点击"刷新"按钮更新请求列表
- **数据持久化**: 插件会自动保存数据，重启浏览器后数据仍然存在

## 技术实现

### 核心技术

- **请求拦截**: 重写XMLHttpRequest和fetch方法
- **按钮识别**: 智能识别各种类型的可点击元素
- **消息通信**: 使用Chrome Extension API进行组件间通信
- **数据存储**: 使用chrome.storage.local进行数据持久化

### 架构设计

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   Content Script │    │ Background Script│    │   Popup Page    │
├─────────────────┤    ├─────────────────┤    ├─────────────────┤
│ • 监听点击事件   │    │ • 消息路由      │    │ • 用户界面      │
│ • 拦截API请求   │◄──►│ • 数据存储      │◄──►│ • 控制操作      │
│ • 请求数据解析   │    │ • 跨标签页通信   │    │ • 结果展示      │
└─────────────────┘    └─────────────────┘    └─────────────────┘
```

### 文件结构

```
find-request/
├── manifest.json          # 插件配置文件
├── content.js            # 内容脚本
├── background.js         # 后台脚本
├── popup.html           # 弹出页面HTML
├── popup.js             # 弹出页面逻辑
├── popup.css            # 弹出页面样式
└── README.md            # 说明文档
```

## 调试指南

### 查看日志

1. **Content Script日志**
   - 打开开发者工具 (F12)
   - 切换到Console标签
   - 查看以`[API捕获器]`开头的日志

2. **Background Script日志**
   - 进入扩展程序页面 (`chrome://extensions/`)
   - 找到本插件，点击"检查视图"中的"背景页"
   - 查看Console中的日志

3. **Popup页面日志**
   - 右键点击插件图标
   - 选择"检查弹出内容"
   - 查看Console中的日志

### 常见问题排查

1. **无法捕获请求**
   - 检查是否已开启监听
   - 确认点击的是可识别的按钮元素
   - 查看Console是否有错误信息

2. **数据不显示**
   - 点击"刷新"按钮
   - 检查chrome.storage权限
   - 重新安装插件

3. **复制功能失效**
   - 检查浏览器是否支持Clipboard API
   - 确认页面是HTTPS协议
   - 尝试手动选择复制

## 开发说明

### 开发环境

- Chrome浏览器 (版本88+)
- 支持ES6+语法
- 使用Manifest V3规范

### 扩展开发

如需修改或扩展功能，请注意：

1. 修改代码后需要在扩展程序页面点击"重新加载"
2. 重要的日志信息已添加，便于调试
3. 所有异步操作都有错误处理
4. 遵循Chrome Extension最佳实践

### 贡献指南

欢迎提交Issue和Pull Request！

## 许可证

本项目采用MIT许可证。 